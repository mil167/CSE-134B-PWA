<!--
gamestats.html
File size: 2KB
Load time: 359ms to paint
 -->

<!DOCTYPE HTML>
<html>
<head>
	<title>Game Stats</title>
	<link rel="stylesheet" href="hw4_gamestats.css">
</head>
<body>
	<p>
    <a href="http://jigsaw.w3.org/css-validator/check/referer">
        <img style="border:0;width:88px;height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valid CSS!" />
    </a>
    </p>
    <p>
   <a href="https://validator.w3.org/check?uri=referer"><img
       src="http://www.w3.org/Icons/valid-xhtml10"
       alt="Valid XHTML 1.0!" height="31" width="88" /></a>
</p>

<script>
	//Taken from https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript
	//Used instead of php to do content generation solely in js
	var urlParams;
	(window.onpopstate = function () {
	    var match,
	        pl     = /\+/g,  // Regex for replacing addition symbol with a space
	        search = /([^&=]+)=?([^&]*)/g,
	        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	        query  = window.location.search.substring(1);

	    urlParams = {};
	    while (match = search.exec(query))
	       urlParams[decode(match[1])] = decode(match[2]);
	})();
</script>
<script src="data-roster.js"></script>


  <form id="baseForm" name="baseForm">
    <p>Enemy Team: <input type="text" name="enemyTeam"></p>
    <p>Date: <input type="text" name="date"></p>
    <p>Time: <input type="text" name="time"></p>
    <p>Practice: <input type="checkbox" name="practice"></p>
    <p>Finished: <input type="checkbox" name="finished"></p>
    <p>Our score: <input type="number" name="ourScore"></p>
		<p>Their score: <input type="number" name="theirScore"></p>
		<p>Vod link: <input type="url" name="vod"></p>
		<p>Highlight vod link: <input type="url" name="hlvod"></p>
    <h3>Highlights</h3>
    <div id="highlightsDiv">
      <table id="highlightsTable">
      </table>
    </div>
  </form>

	<footer>
		<hr>
		<ul>
		 <li><a href="home.html">Home</a></li>
		 <li><a href="roster1.html">Roster</a></li>
		 <li><a href="hw4_schedule.html">Schedule</a></li>
		</ul>
	</footer>

  <script>
    var gameRender = function(){
      let pageMatch = getSchedule()[urlParams["matchID"]];
      let pageTeam = getTeam();
      document.baseForm.enemyTeam.value = pageMatch.enemyTeam;
      document.baseForm.date.value = pageMatch.date;
      document.baseForm.time.value = pageMatch.time;
      document.baseForm.practice.value = pageMatch.practice;
      document.baseForm.finished.value = pageMatch.finished;
      document.baseForm.ourScore.value = pageMatch.ourScore;
      document.baseForm.theirScore.value = pageMatch.enemyScore;
      document.baseForm.vod.value = pageMatch.vod;
      document.baseForm.hlvod.value = pageMatch.hlvod;

      for(highlightNum in pageMatch.highlights){
				let highlight = pageMatch.highlights[highlightNum];
				let timeIn = document.createElement('input');
				timeIn.type="number";
				timeIn.value=highlight.time;
				timeIn.name="highlightTime " + highlightNum;

				let descIn = document.createElement('input');
				descIn.type="text";
				descIn.value=highlight.desc;
				descIn.name="highlightDesc " + highlightNum;

			}
    }
    gameRender();
  </script>
</body>
</html>
